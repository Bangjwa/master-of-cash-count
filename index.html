<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì •ì‚°ì™•ìºì‹œí‚¹</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      padding: 1rem;
      line-height: 1.4;
    }

    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 1rem;
      margin-bottom: 1rem;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      width: 100%;
      padding: 1rem;
      background: #4a90e2;
      color: white;
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .result {
      background: #eef;
      border: 1px solid #ccd;
      padding: 0.5rem;
      border-radius: 6px;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <img src="https://bangjwa.github.io/master-of-cash-count/cach-count-top.png" style="width: 100%" />
  <h2>ì •ì‚°ì™•ìºì‹œí‚¹</h2>

  <div class="card">
    <label>ì •ì‚° ì´ì•¡</label>
    <input type="number" id="totalAmount" placeholder="ì˜ˆ: 100000" />
  </div>

  <div class="card">
    <label>ìˆ  ê¸ˆì•¡</label>
    <input type="number" id="alcoholAmount" />
    <label>ìˆ  ì°¸ì—¬ì (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
    <input type="text" id="alcoholPeople" placeholder="ì˜ˆ: í™ê¸¸ë™,ê¹€ì² ìˆ˜" />
  </div>

  <div class="card">
    <label>ì•ˆì£¼ ê¸ˆì•¡</label>
    <input type="number" id="foodAmount" />
    <label>ì•ˆì£¼ ì°¸ì—¬ì</label>
    <input type="text" id="foodPeople" />
  </div>

  <div class="card">
    <label>ìŒë£Œ ê¸ˆì•¡</label>
    <input type="number" id="beverageAmount" />
    <label>ìŒë£Œ ì°¸ì—¬ì</label>
    <input type="text" id="beveragePeople" />
  </div>

  <div class="card">
    <button onclick="calculate()">ì •ì‚° ê³„ì‚°í•˜ê¸°</button>
    <div id="summary" class="result"></div>
    <div id="result" class="result"></div>
  </div>

  <script>
    function parsePeople(str) {
      return str.split(',').map(p => p.trim()).filter(Boolean);
    }

    function calculate() {
      const total = Number(document.getElementById("totalAmount").value || 0);
      const sections = [
        {
          name: "ìˆ ",
          amount: Number(document.getElementById("alcoholAmount").value || 0),
          people: parsePeople(document.getElementById("alcoholPeople").value)
        },
        {
          name: "ì•ˆì£¼",
          amount: Number(document.getElementById("foodAmount").value || 0),
          people: parsePeople(document.getElementById("foodPeople").value)
        },
        {
          name: "ìŒë£Œ",
          amount: Number(document.getElementById("beverageAmount").value || 0),
          people: parsePeople(document.getElementById("beveragePeople").value)
        }
      ];

      let userMap = {};
      let sectionSum = 0;

      sections.forEach(section => {
        const perPerson = section.people.length > 0 ? section.amount / section.people.length : 0;
        sectionSum += section.amount;

        section.people.forEach(name => {
          if (!userMap[name]) userMap[name] = 0;
          userMap[name] += perPerson;
        });
      });

      // Summary Section
      const diff = total - sectionSum;
      let summaryText = `ì´ì•¡: â‚©${total.toLocaleString()}<br/>í•­ëª© í•©ê³„: â‚©${sectionSum.toLocaleString()}<br/>`;
      if (diff === 0) {
        summaryText += "<strong>ì •ì‚° ì´ì•¡ê³¼ í•­ëª© í•©ê³„ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.</strong>";
      } else if (diff > 0) {
        summaryText += `<strong>â‚©${diff.toLocaleString()} ë¯¸ë‹¬ì…ë‹ˆë‹¤.</strong>`;
      } else {
        summaryText += `<strong>â‚©${Math.abs(diff).toLocaleString()} ì´ˆê³¼ì…ë‹ˆë‹¤.</strong>`;
      }
      document.getElementById("summary").innerHTML = summaryText;

      // Result Section
      let resultText = "<strong>ğŸ“‹ 1ì¸ë‹¹ ì •ì‚° ê¸ˆì•¡</strong><br/>";
      Object.entries(userMap).forEach(([name, value]) => {
        resultText += `${name}: â‚©${Math.round(value).toLocaleString()}<br/>`;
      });
      document.getElementById("result").innerHTML = resultText;
    }
  </script>

</body>
</html>
