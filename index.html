<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>정산 계산기</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Helvetica Neue', Arial, sans-serif; padding: 1rem; background: #f7f9fc; color: #333; }
    header { background: #4a90e2; color: white; padding: 1rem; text-align: center; border-radius: 8px; margin-bottom: 1rem; font-size: 1.4rem; }
    .section { background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    h2 { margin-bottom: 0.5rem; font-size: 1.2rem; }
    label { display: block; margin-top: 0.5rem; }
    input[type="text"], input[type="number"] { width: 100%; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #ccc; border-radius: 4px; }
    textarea { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; margin-top: 0.25rem; }
    .result { font-weight: bold; margin-top: 1rem; }
    button { width: 100%; margin-top: 1rem; padding: 0.75rem; font-size: 1rem; background-color: #4a90e2; color: white; border: none; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <header>정산 계산기</header>

  <div class="section">
    <h2>1. 정산 총액 입력</h2>
    <label>정산명 <input type="text" id="title" /></label>
    <label>총액 <input type="number" id="totalAmount" /></label>
    <label>술 금액 <input type="number" id="alcoholAmount" /></label>
    <label>안주 금액 <input type="number" id="foodAmount" /></label>
    <label>음료 금액 <input type="number" id="beverageAmount" /></label>
    <label>기타 금액 <input type="number" id="etcAmount" /></label>
    <div id="sumCheck" class="result"></div>
  </div>

  <div class="section">
    <h2>2. 항목별 인원 입력</h2>
    <label>술 (이름 쉼표로 구분)<textarea id="alcoholPeople"></textarea></label>
    <label>술/안주<textarea id="alcoholFoodPeople"></textarea></label>
    <label>음료<textarea id="beveragePeople"></textarea></label>
    <label>음료/안주<textarea id="beverageFoodPeople"></textarea></label>
    <label>기타<textarea id="etcPeople"></textarea></label>
  </div>

  <div class="section">
    <h2>3. 정산 결과</h2>
    <button onclick="calculate()">정산하기</button>
    <div id="results" class="result"></div>
  </div>

  <script>
    function calculate() {
      const total = Number(document.getElementById('totalAmount').value || 0);
      const alcohol = Number(document.getElementById('alcoholAmount').value || 0);
      const food = Number(document.getElementById('foodAmount').value || 0);
      const beverage = Number(document.getElementById('beverageAmount').value || 0);
      const etc = Number(document.getElementById('etcAmount').value || 0);

      const splitTotal = alcohol + food + beverage + etc;
      const sumCheckEl = document.getElementById('sumCheck');

      let diff = total - splitTotal;
      let status = diff === 0 ? '정상' : (diff > 0 ? `미달 ₩${diff.toLocaleString()}` : `초과 ₩${Math.abs(diff).toLocaleString()}`);
      sumCheckEl.innerText = `입력된 항목 합계: ₩${splitTotal.toLocaleString()} / 상태: ${status}`;

      const parsePeople = id => (document.getElementById(id).value || '').split(',').map(p => p.trim()).filter(p => p);

      const alcoholPeople = parsePeople('alcoholPeople');
      const alcoholFoodPeople = parsePeople('alcoholFoodPeople');
      const beveragePeople = parsePeople('beveragePeople');
      const beverageFoodPeople = parsePeople('beverageFoodPeople');
      const etcPeople = parsePeople('etcPeople');

      let payMap = {};

      const addShare = (people, amount) => {
        const share = people.length ? amount / people.length : 0;
        people.forEach(name => {
          if (!payMap[name]) payMap[name] = 0;
          payMap[name] += share;
        });
      };

      addShare(alcoholPeople, alcohol);
      addShare(alcoholFoodPeople, alcohol + food);
      addShare(beveragePeople, beverage);
      addShare(beverageFoodPeople, beverage + food);
      addShare(etcPeople, etc);

      let resultHtml = '<ul>';
      for (const [name, amt] of Object.entries(payMap)) {
        resultHtml += `<li>${name}: ₩${Math.round(amt).toLocaleString()}</li>`;
      }
      resultHtml += '</ul>';

      document.getElementById('results').innerHTML = resultHtml;
    }
  </script>
</body>
</html>
