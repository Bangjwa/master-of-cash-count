<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì •ì‚°ì™•ìºì‹œí‚¹</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background-color: #f9f9f9;
      color: #333;
      line-height: 1.6;
      padding: 1rem;
    }

    header {
      background-color: #4a90e2;
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      border-radius: 8px;
    }

    .container {
      margin-top: 1rem;
    }

    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 1rem;
      margin-bottom: 1rem;
    }

    button {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #3a78c2;
    }

    @media (min-width: 600px) {
      .container {
        max-width: 500px;
        margin: 2rem auto;
      }
    }
  </style>
</head>
<body>
  <img src="https://bangjwa.github.io/master-of-cash-count/cach-count-top.png" style="width: 100%" />
  <header>
    ì •ì‚°ì™•ìºì‹œí‚¹ (ì¹´í†¡ì •ì‚°ë„ìš°ë¯¸)
  </header>

  <div class="container">
    <div class="card">
      <h2>ì •ì‚°ëª…</h2>
      <p><input type="text" id="cash_title" placeholder="ì˜ˆ: 2025ë…„ 1ì›” 1ì¼ í™”ê²½ ë¯¸ìŠ¤í„°ìœ " /></p>
    </div>

    <div class="card">
      <h2>ì •ì‚°ì´ì•¡</h2>
      <p>ì˜ìˆ˜ì¦ì˜ ì •ì‚° ì´ì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
      <p><input type="number" id="cash_total" placeholder="ì˜ˆ: 135000" /></p>
    </div>

    <div class="card">
      <h2>ìˆ /ì•ˆì£¼</h2>
      <p>ì¸ì› ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„)</p>
      <input type="text" id="people_drink" placeholder="ì˜ˆ: ìœ ì„±, ì¬í˜„, ìˆ˜ì§€" oninput="calculateSectionTotal('drink')" />
      
      <p>1ì¸ë‹¹ ê¸ˆì•¡ (â‚©)</p>
      <input type="number" id="amount_per_person_drink" placeholder="ì˜ˆ: 15000" oninput="calculateSectionTotal('drink')" />
    
      <p>ì´ ê¸ˆì•¡: <strong id="total_drink">â‚©0</strong></p>
    </div>
    
    <div class="card">
      <h2>ì•ˆì£¼</h2>
      <p>ì¸ì› ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„)</p>
      <input type="text" id="people_food" placeholder="ì˜ˆ: ìœ ì„±, ì¬í˜„" oninput="calculateSectionTotal('food')" />
    
      <p>1ì¸ë‹¹ ê¸ˆì•¡ (â‚©)</p>
      <input type="number" id="amount_per_person_food" placeholder="ì˜ˆ: 10000" oninput="calculateSectionTotal('food')" />
    
      <p>ì´ ê¸ˆì•¡: <strong id="total_food">â‚©0</strong></p>
    </div>
    
    <div class="card">
      <h2>ê¸°íƒ€ (ë³„ë„ ì‚¬ìœ )</h2>
      <p>ì‚¬ìœ </p>
      <input type="text" id="reason_etc" placeholder="ì˜ˆ: ëŠ¦ì°¸" />
      <p>ì¸ì› ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„)</p>
      <input type="text" id="people_etc" placeholder="ì˜ˆ: ìˆ˜ì§€" oninput="calculateSectionTotal('etc')" />
    
      <p>1ì¸ë‹¹ ê¸ˆì•¡ (â‚©)</p>
      <input type="number" id="amount_per_person_etc" placeholder="ì˜ˆ: 5000" oninput="calculateSectionTotal('etc')" />
    
      <p>ì´ ê¸ˆì•¡: <strong id="total_etc">â‚©0</strong></p>
    </div>    

    <div class="card">
      <h2>í•©ì‚° ìš”ì•½</h2>
      <p>ìˆ /ì•ˆì£¼ ì •ì‚° ì´ì•¡: <strong id="total_drink_summary">â‚©0</strong></p>
      <p>ì•ˆì£¼ ì •ì‚° ì´ì•¡: <strong id="total_food_summary">â‚©0</strong></p>
      <p>ê¸°íƒ€ ì •ì‚° ì´ì•¡: <strong id="total_etc_summary">â‚©0</strong></p>
      <hr />
      <p>ì„¸ë¶€í•­ëª© í•©ì‚° ì´ì•¡: <strong id="total_all_sections">â‚©0</strong></p>
      <p>ì…ë ¥ëœ ì •ì‚° ì´ì•¡: <strong id="cash_total_display">â‚©0</strong></p>
      <p id="compare_result" style="font-weight: bold; color: #d9534f;">ê¸ˆì•¡ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      <p id="difference_result" style="font-weight: bold; color: #999;"></p>
    </div>

    <div class="card">
      <h2>ì •ì‚°ê³„ì¢Œ (ì €ì¥ë˜ì§€ ì•ŠìŒ)</h2>
      <h2>ë‹‰ë„¤ì„ìœ¼ë¡œ ì…ê¸ˆìš”í•¨</h2>
      <p>ì€í–‰ëª… <strong>ê³„ì¢Œì…ë ¥</strong> ê³„ì¢Œëª…</p>
      <p><input type="checkbox" id="cash_available_kakaopay" checked />ì¹´ì¹´ì˜¤í˜ì´ ê°€ëŠ¥</p>
    </div>

    <div class="card">
      <h2>ì •ì‚°ë°© ê³µìœ í•˜ê¸°</h2>
      <a id="kakaotalk-sharing-btn" href="javascript:void(0);" onclick="validateAndShare()">
        <img src="https://developers.kakao.com/assets/img/about/logos/kakaotalksharing/kakaotalk_sharing_btn_medium.png"
          alt="ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ë³´ë‚´ê¸° ë²„íŠ¼" />
      </a>
    </div>

    
  </div>

  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.5/kakao.min.js" integrity="sha384-dok87au0gKqJdxs7msEdBPNnKSRT+/mhTVzq+qOhcL464zXwvcrpjeWvyj1kCdq6" crossorigin="anonymous"></script>

<script>
  Kakao.init('bd2feade80422820dca04e50c262ce0c');  // ì‚¬ìš©í•˜ë ¤ëŠ” ì•±ì˜ JavaScript í‚¤ ì…ë ¥
</script>

<script>
    function calculateSectionTotal(type) {
    const peopleInput = document.getElementById(`people_${type}`).value;
    const amountInput = parseInt(document.getElementById(`amount_per_person_${type}`).value || "0", 10);
    const peopleList = peopleInput
      .split(',')
      .map(p => p.trim())
      .filter(p => p !== "");

    const total = peopleList.length * amountInput;
    document.getElementById(`total_${type}`).textContent = `â‚©${total.toLocaleString()}`;
    document.getElementById(`total_${type}_summary`).textContent = `â‚©${total.toLocaleString()}`;

    updateSummary();
  }

  function updateSummary() {
    const drink = parseCurrency(document.getElementById('total_drink_summary').textContent);
    const food = parseCurrency(document.getElementById('total_food_summary').textContent);
    const etc = parseCurrency(document.getElementById('total_etc_summary').textContent);
    const totalSectionSum = drink + food + etc;

    document.getElementById('total_all_sections').textContent = `â‚©${totalSectionSum.toLocaleString()}`;

    const cashTotalInput = parseInt(document.getElementById('cash_total').value || "0", 10);
    document.getElementById('cash_total_display').textContent = `â‚©${cashTotalInput.toLocaleString()}`;

    const compareResult = document.getElementById('compare_result');
    const differenceResult = document.getElementById('difference_result');
    
    if (totalSectionSum === cashTotalInput) {
      compareResult.textContent = 'âœ… ì •ì‚° ì´ì•¡ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.';
      compareResult.style.color = '#28a745';
      differenceResult.textContent = '';
    } else {
      const diff = totalSectionSum - cashTotalInput;
      const absDiff = Math.abs(diff).toLocaleString();
      compareResult.textContent = 'âŒ ê¸ˆì•¡ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
      compareResult.style.color = '#d9534f';
    
      if (diff > 0) {
        differenceResult.textContent = `ğŸ’° ì„¸ë¶€ í•­ëª© ì´ì•¡ì´ ì •ì‚° ì´ì•¡ë³´ë‹¤ â‚©${absDiff} ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.`;
      } else {
        differenceResult.textContent = `ğŸ’¸ ì„¸ë¶€ í•­ëª© ì´ì•¡ì´ ì •ì‚° ì´ì•¡ë³´ë‹¤ â‚©${absDiff} ë¶€ì¡±í•©ë‹ˆë‹¤.`;
      }
    }
  }

  function parseCurrency(value) {
    return parseInt(value.replace(/[â‚©,]/g, '') || "0", 10);
  }
  
  function validateAndShare() {
    const cashTitle = document.getElementById("cash_title").value.trim();
    const cashTotal = document.getElementById("cash_total").value.trim();

    // ìœ íš¨ì„± ê²€ì‚¬
    if (cashTitle === "") {
      alert("ì •ì‚°ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    if (cashTotal === "" || isNaN(cashTotal) || Number(cashTotal) <= 0) {
      alert("ì •ì‚°ì´ì•¡ì„ ìˆ«ìë¡œ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    // ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ì‹¤í–‰
    Kakao.Share.sendCustom({
      templateId: 122936,
      templateArgs: {
        "CASH_TITLE": cashTitle,
        "CASH_TOTAL": cashTotal,
        "CASH_CONTENT": "ì •ì‚°ì´ ë„ì°©í–ˆì–´ìš”! í™•ì¸í•´ì£¼ì„¸ìš”."
      }
    });
  }

  // ì…ë ¥ê°’ ë³€ê²½ ì‹œ ìš”ì•½ ì—…ë°ì´íŠ¸
  document.getElementById('cash_total').addEventListener('input', updateSummary);
  
  // Kakao.Share.createCustomButton({
  //   container: '#kakaotalk-sharing-btn',
  //   templateId: 122936,  // ê³µìœ  í•  ë©”ì‹œì§€ í…œí”Œë¦¿ ID ì…ë ¥
  //   templateArgs: {
  //     "CASH_TITLE" : cashTitle,
  //     "CASH_CONTENT" : "ë³¸ë¬¸ì…ë‹ˆë‹¤.",
  //   }
  // });
</script>


</body>
</html>
